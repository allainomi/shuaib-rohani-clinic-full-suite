cat > .github/workflows/ci-cd.yml << 'EOF'
name: CI/CD Pipeline

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  test-and-archive:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: List project structure
      run: |
        echo "Project Structure:"
        find . -type f -name "*.json" -o -name "*.js" -o -name "*.html" -o -name "*.css" -o -name "*.kt" -o -name "*.xml" | head -20
    
    - name: Create basic build artifacts
      run: |
        mkdir -p artifacts
        # Project structure archive
        find . -maxdepth 2 -type f -name "*.json" -o -name "*.js" -o -name "*.html" -o -name "*.css" -o -name "*.kt" -o -name "*.xml" | head -10 > artifacts/file-list.txt
        # Create a simple build info file
        echo "Build Date: $(date)" > artifacts/build-info.txt
        echo "Commit: ${{ github.sha }}" >> artifacts/build-info.txt
        echo "Branch: ${{ github.ref }}" >> artifacts/build-info.txt
    
    - name: Upload Source Code Artifact
      uses: actions/upload-artifact@v4
      with:
        name: source-code
        path: |
          frontend/
          backend/
          android/
          lib/
        retention-days: 30
    
    - name: Upload Build Artifacts
      uses: actions/upload-artifact@v4
      with:
        name: build-artifacts
        path: artifacts/
        retention-days: 30

  deploy-demo:
    runs-on: ubuntu-latest
    needs: test-and-archive
    if: github.ref == 'refs/heads/main'
    
    steps:
    - name: Download artifacts
      uses: actions/download-artifact@v4
      with:
        name: source-code
    
    - name: Show downloaded files
      run: ls -la
EOF
